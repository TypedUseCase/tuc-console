<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="667px" preserveAspectRatio="none" style="width:1221px;height:667px;background:#FFFFFF;" version="1.1" viewBox="0 0 1221 667" width="1221px" zoomAndPan="magnify"><defs><filter height="300%" id="f15mu8sfdgq0nm" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="655.1797" style="stroke:#A80036;stroke-width:1.0;" width="391.5" x="1" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="128" x="132.75" y="18.0669">ConsentManager</text><rect fill="#FFFFFF" filter="url(#f15mu8sfdgq0nm)" height="405.8594" style="stroke:#A80036;stroke-width:1.0;" width="10" x="59.5" y="134.7266"/><rect fill="#FFFFFF" filter="url(#f15mu8sfdgq0nm)" height="341.5938" style="stroke:#A80036;stroke-width:1.0;" width="10" x="299.5" y="198.9922"/><rect fill="#FFFFFF" filter="url(#f15mu8sfdgq0nm)" height="221.0625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="766" y="290.3906"/><rect fill="#FFFFFF" filter="url(#f15mu8sfdgq0nm)" height="191.9297" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1023" y="319.5234"/><rect fill="#FFFFFF" filter="url(#f15mu8sfdgq0nm)" height="85.3984" style="stroke:#000000;stroke-width:2.0;" width="183" x="950" y="397.9219"/><rect fill="#FFFFFF" height="35.1328" style="stroke:none;stroke-width:1.0;" width="183" x="950" y="448.1875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="64" x2="64" y1="124.7266" y2="558.5859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="304.5" x2="304.5" y1="124.7266" y2="558.5859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="508.5" x2="508.5" y1="124.7266" y2="558.5859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="770.5" x2="770.5" y1="124.7266" y2="558.5859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1027.5" x2="1027.5" y1="124.7266" y2="558.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83" x="20" y="105.1279">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="5" y="121.4248">Generic Service</text><ellipse cx="64.5" cy="35.1328" fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M64.5,43.1328 L64.5,70.1328 M51.5,51.1328 L77.5,51.1328 M64.5,70.1328 L51.5,85.1328 M64.5,70.1328 L77.5,85.1328 " fill="none" filter="url(#f15mu8sfdgq0nm)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83" x="20" y="570.5811">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="5" y="586.8779">Generic Service</text><ellipse cx="64.5" cy="600.1797" fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M64.5,608.1797 L64.5,635.1797 M51.5,616.1797 L77.5,616.1797 M64.5,635.1797 L51.5,650.1797 M64.5,635.1797 L77.5,650.1797 " fill="none" filter="url(#f15mu8sfdgq0nm)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="164" x="220.5" y="73.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83" x="261" y="93.1279">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="227.5" y="109.4248">Interaction Collector</text><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="164" x="220.5" y="557.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83" x="261" y="577.5811">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="227.5" y="593.8779">Interaction Collector</text><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="213" x="402.5" y="69.1328"/><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="213" x="398.5" y="73.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83" x="463.5" y="93.1279">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="199" x="405.5" y="109.4248">InteractionCollectorStream</text><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="213" x="402.5" y="557.5859"/><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="213" x="398.5" y="561.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83" x="463.5" y="581.5811">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="199" x="405.5" y="597.8779">InteractionCollectorStream</text><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="97" x="720.5" y="73.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83" x="727.5" y="93.1279">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24" x="757" y="109.4248">PID</text><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="97" x="720.5" y="557.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83" x="727.5" y="577.5811">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24" x="757" y="593.8779">PID</text><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="139" x="956.5" y="73.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83" x="984.5" y="93.1279">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="963.5" y="109.4248">PersonAggregate</text><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="139" x="956.5" y="557.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="83" x="984.5" y="577.5811">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="963.5" y="593.8779">PersonAggregate</text><rect fill="#FFFFFF" filter="url(#f15mu8sfdgq0nm)" height="405.8594" style="stroke:#A80036;stroke-width:1.0;" width="10" x="59.5" y="134.7266"/><rect fill="#FFFFFF" filter="url(#f15mu8sfdgq0nm)" height="341.5938" style="stroke:#A80036;stroke-width:1.0;" width="10" x="299.5" y="198.9922"/><rect fill="#FFFFFF" filter="url(#f15mu8sfdgq0nm)" height="221.0625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="766" y="290.3906"/><rect fill="#FFFFFF" filter="url(#f15mu8sfdgq0nm)" height="191.9297" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1023" y="319.5234"/><rect fill="#EEEEEE" filter="url(#f15mu8sfdgq0nm)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1214" x="0" y="155.293"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1214" y1="155.293" y2="155.293"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1214" y1="158.293" y2="158.293"/><rect fill="#EEEEEE" filter="url(#f15mu8sfdgq0nm)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="249" x="482.5" y="144.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="230" x="488.5" y="160.7935">Identify person on interaction</text><polygon fill="#A80036" points="287.5,194.9922,297.5,198.9922,287.5,202.9922,291.5,198.9922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="69.5" x2="293.5" y1="198.9922" y2="198.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="76.5" y="193.9263">PostInteraction(InteractionEvent)</text><polygon fill="#FBFB77" filter="url(#f15mu8sfdgq0nm)" points="135,211.9922,473,211.9922,483,222.9922,473,234.9922,135,234.9922,125,222.9922,135,211.9922" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="334" x="137" y="228.0591">do: create an interaction event based on interaction</text><line style="stroke:#A80036;stroke-width:1.0;" x1="507" x2="497" y1="261.2578" y2="257.2578"/><line style="stroke:#A80036;stroke-width:1.0;" x1="507" x2="497" y1="261.2578" y2="265.2578"/><line style="stroke:#A80036;stroke-width:1.0;" x1="309.5" x2="508" y1="261.2578" y2="261.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="316.5" y="256.1919">InteractionEvent</text><line style="stroke:#A80036;stroke-width:1.0;" x1="764" x2="754" y1="290.3906" y2="286.3906"/><line style="stroke:#A80036;stroke-width:1.0;" x1="764" x2="754" y1="290.3906" y2="294.3906"/><line style="stroke:#A80036;stroke-width:1.0;" x1="509" x2="765" y1="290.3906" y2="290.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="238" x="516" y="285.3247">OnInteractionEvent(InteractionEvent)</text><polygon fill="#A80036" points="1011,315.5234,1021,319.5234,1011,323.5234,1015,319.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="776" x2="1017" y1="319.5234" y2="319.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228" x="783" y="314.4575">IdentifyPerson(IdentityMatchingSet)</text><polygon fill="#FBFB77" filter="url(#f15mu8sfdgq0nm)" points="856,332.5234,1199,332.5234,1209,358.5234,1199,385.5234,856,385.5234,846,358.5234,856,332.5234" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="858" y="348.5903">do:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="874" y="363.7231">normalize contact</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="323" x="874" y="378.856">identify a person based on the normalized contact</text><path d="M950,397.9219 L1016,397.9219 L1016,404.9219 L1006,414.9219 L950,414.9219 L950,397.9219 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="85.3984" style="stroke:#000000;stroke-width:2.0;" width="183" x="950" y="397.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="965" y="410.9888">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="97" x="1031" y="410.1323">[PersonFound]</text><polygon fill="#FBFB77" filter="url(#f15mu8sfdgq0nm)" points="970,420.0547,1086,420.0547,1096,431.0547,1086,443.0547,970,443.0547,960,431.0547,970,420.0547" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="972" y="436.1216">do: return Person</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="950" x2="1133" y1="449.1875" y2="449.1875"/><polygon fill="#FBFB77" filter="url(#f15mu8sfdgq0nm)" points="976,455.1875,1079,455.1875,1089,466.1875,1079,478.1875,976,478.1875,966,466.1875,976,455.1875" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="978" y="471.2544">do: return Error</text><polygon fill="#A80036" points="782,507.4531,772,511.4531,782,515.4531,778,511.4531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="776" x2="1027" y1="511.4531" y2="511.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="788" y="506.3872">Person</text><polygon fill="#A80036" points="75.5,536.5859,65.5,540.5859,75.5,544.5859,71.5,540.5859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="69.5" x2="303.5" y1="540.5859" y2="540.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="81.5" y="535.52">InteractionResult</text><!--MD5=[d8446d90e3cad484604f5af79d8f907e]
@startuml


== Identify person on interaction ==

box "ConsentManager"
    actor "Generic Service" as GenericService <<Consents>>
    participant "Interaction Collector" as InteractionCollector <<Consents>>
end box
collections "InteractionCollectorStream" as InteractionCollectorStream <<Consents>>
participant "PID" as PersonIdentificationEngine <<Consents>>
participant "PersonAggregate" as PersonAggregate <<Consents>>

activate GenericService
GenericService -> InteractionCollector ++: PostInteraction(InteractionEvent)
    hnote over InteractionCollector
    do: create an interaction event based on interaction
    end hnote
    InteractionCollector ->> InteractionCollectorStream: InteractionEvent
    InteractionCollectorStream ->> PersonIdentificationEngine: OnInteractionEvent(InteractionEvent)
        activate PersonIdentificationEngine
        PersonIdentificationEngine -> PersonAggregate ++: IdentifyPerson(IdentityMatchingSet)
            hnote over PersonAggregate
            do:
                normalize contact
                identify a person based on the normalized contact
            end hnote
            alt PersonFound
                hnote over PersonAggregate
                do: return Person
                end hnote
            else
                hnote over PersonAggregate
                do: return Error
                end hnote
            end
        PersonAggregate - -> PersonIdentificationEngine - -: Person
        deactivate PersonIdentificationEngine
InteractionCollector - -> GenericService - -: InteractionResult

deactivate GenericService
@enduml

PlantUML version 1.2021.7(Sun May 23 12:40:07 UTC 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>